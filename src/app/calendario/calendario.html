<h2 class="text-center text-primary mt-4">ğŸ“… Agenda tu cita</h2>

<div class="container mt-3">
  <full-calendar [options]="calendarOptions"></full-calendar>
</div>

<!-- Wizard / modal -->
<div class="wizard-backdrop" *ngIf="wizardAbierto">
  <div class="wizard-card">
    <button class="btn-close float-end" (click)="cerrarWizard()"></button>

    <!-- PASO 1: Seleccionar servicio -->
    <ng-container *ngIf="paso === 1">
      <h5 class="mb-3">â‘  Selecciona un servicio veterinario:</h5>

      <select class="form-select" [(ngModel)]="servicioSeleccionado">
        <option [ngValue]="null" disabled selected>Seleccione un servicioâ€¦</option>
        <option *ngFor="let s of servicios" [ngValue]="s">{{ s.nombre }}</option>
      </select>

      <div class="d-flex justify-content-end mt-3">
        <button
          class="btn btn-primary"
          [disabled]="!servicioSeleccionado"
          (click)="continuarConServicio()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 2: Seleccionar hora -->
    <ng-container *ngIf="paso === 2">
      <h5 class="mb-3">â‘¡ Selecciona una hora</h5>

      <select class="form-select" [(ngModel)]="horaSeleccionada">
        <option [ngValue]="null" disabled selected>Seleccionaâ€¦</option>
        <option *ngFor="let h of horas" [value]="h">{{ h }}</option>
      </select>

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 1">AtrÃ¡s</button>
        <button
          class="btn btn-primary"
          [disabled]="!horaSeleccionada"
          (click)="continuarConHora()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 3: Nombre de la mascota -->
    <ng-container *ngIf="paso === 3">
      <h5 class="mb-3">â‘¢ Ingresa el nombre de tu mascota</h5>

      <input
        type="text"
        class="form-control"
        placeholder="Ej. Firulais"
        [(ngModel)]="nombreMascota"
      />

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 2">AtrÃ¡s</button>
        <button
          class="btn btn-primary"
          [disabled]="!nombreMascota"
          (click)="continuarConMascota()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 4: Nombre del dueÃ±o -->
    <ng-container *ngIf="paso === 4">
      <h5 class="mb-3">â‘£ Ingresa el nombre del dueÃ±o</h5>

      <input
        type="text"
        class="form-control"
        placeholder="Ej. Juan PÃ©rez"
        [(ngModel)]="nombreDueno"
      />

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 3">AtrÃ¡s</button>
        <button
          class="btn btn-primary"
          [disabled]="!nombreDueno"
          (click)="paso = 5"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 5: ConfirmaciÃ³n -->
    <ng-container *ngIf="paso === 5">
      <h5 class="mb-3">â‘¤ ConfirmaciÃ³n</h5>

      <p><strong>ğŸ“… Fecha:</strong> {{ fechaISO }}</p>
      <p><strong>ğŸ©º Servicio:</strong> {{ servicioSeleccionado?.nombre }}</p>
      <p><strong>â° Hora:</strong> {{ horaSeleccionada }}</p>
      <p><strong>ğŸ¾ Mascota:</strong> {{ nombreMascota }}</p>
      <p><strong>ğŸ‘¤ DueÃ±o:</strong> {{ nombreDueno }}</p>

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 4">AtrÃ¡s</button>
        <button class="btn btn-success" (click)="confirmarReserva()">
          Confirmar cita
        </button>
      </div>
    </ng-container>
  </div>
</div>
 