<h2 class="text-center text-primary mt-4">ğŸ“… Agenda tu cita</h2>

<div class="container mt-3">
  <full-calendar [options]="calendarOptions"></full-calendar>
</div>

<!-- Wizard / modal -->
<div class="wizard-backdrop" *ngIf="wizardAbierto">
  <div class="wizard-card">
    <button class="btn-close float-end" (click)="cerrarWizard()"></button>

    <!-- PASO 1: Seleccionar servicio -->
    <ng-container *ngIf="paso === 1">
      <h5 class="mb-3">â‘  Selecciona un servicio veterinario:</h5>

      <select class="form-select" [(ngModel)]="servicioSeleccionado">
        <option [ngValue]="null" disabled selected>Seleccione un servicioâ€¦</option>
        <option *ngFor="let s of servicios" [ngValue]="s">{{ s.nombre }}</option>
      </select>

      <div class="d-flex justify-content-end mt-3">
        <button
          class="btn btn-primary"
          [disabled]="!servicioSeleccionado"
          (click)="continuarConServicio()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 2: Seleccionar hora -->
    <ng-container *ngIf="paso === 2">
      <h5 class="mb-3">â‘¡ Selecciona una hora</h5>

      <select class="form-select" [(ngModel)]="horaSeleccionada">
        <option [ngValue]="null" disabled selected>Seleccionaâ€¦</option>
        <option *ngFor="let h of horas" [value]="h">{{ h }}</option>
      </select>

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 1">AtrÃ¡s</button>
        <button
          class="btn btn-primary"
          [disabled]="!horaSeleccionada"
          (click)="continuarConHora()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 3: Tipo de mascota -->
    <ng-container *ngIf="paso === 3">
      <h5 class="fw-bold mb-3">â‘£ Selecciona el tipo de tu mascota</h5>

      <select class="form-select" [(ngModel)]="tipoMascota">
        <option [ngValue]="null" disabled selected>Selecciona tipoâ€¦</option>
        <option value="perro">ğŸ¶ Perro</option>
        <option value="gato">ğŸ± Gato</option>
      </select>

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 2">AtrÃ¡s</button>
        <button class="btn btn-primary" [disabled]="!tipoMascota" (click)="continuarConTipo()">
          Siguiente
        </button>
      </div>
    </ng-container>


    <!-- PASO 3: Nombre de la mascota -->
    <ng-container *ngIf="paso === 4">
      <h5 class="mb-3">â‘¢ Ingresa el nombre de tu mascota</h5>

      <input
        type="text"
        class="form-control"
        placeholder="Ej. Firulais"
        [(ngModel)]="nombreMascota"
      />

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 3">AtrÃ¡s</button>
        <button
          class="btn btn-primary"
          [disabled]="!nombreMascota"
          (click)="continuarConMascota()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 4: Raza de la mascota -->
    <ng-container *ngIf="paso === 5">
      <h5 class="fw-bold mb-3">â‘£ Â¿CuÃ¡l es la raza de tu mascota?</h5>
      <input
        type="text"
        class="form-control mb-3"
        [(ngModel)]="razaMascota"
        placeholder="Ejemplo: Labrador, Poodle, Bulldog..."
      />

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 4">AtrÃ¡s</button>
        <button class="btn btn-primary" (click)="continuarConRaza()" [disabled]="!razaMascota">
          Siguiente
        </button>
      </div>
    </ng-container>

        <ng-container *ngIf="paso === 6">
      <h5 class="mb-3">â‘¢ Ingresa la edad de la Mascota</h5>

      <input
        type="text"
        class="form-control"
        placeholder="Ej. 2 aÃ±os"
        [(ngModel)]="edadMascota"
      />

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 5">AtrÃ¡s</button>
        <button
          class="btn btn-primary"
          [disabled]="!edadMascota"
          (click)="continuarConEdad()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>
 


    <!-- PASO 5: Nombre del dueÃ±o -->
    <ng-container *ngIf="paso === 7">
      <h5 class="mb-3">â‘¤ Ingresa el nombre del dueÃ±o</h5>

      <input
        type="text"
        class="form-control"
        placeholder="Ej. Juan PÃ©rez"
        [(ngModel)]="nombreDueno"
      />

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 6">AtrÃ¡s</button>
        <button
          class="btn btn-primary"
          [disabled]="!nombreDueno"
          (click)="continuarConDueno()"
        >
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 6: TelÃ©fono -->
    <ng-container *ngIf="paso === 8">
      <h5 class="fw-bold mb-3">â‘¥ Ingresa tu nÃºmero de telÃ©fono</h5>
      <input
        type="tel"
        class="form-control mb-3"
        [(ngModel)]="telefonoDuenio"
        placeholder="Ejemplo: 987654321"
      />

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 7">AtrÃ¡s</button>
        <button class="btn btn-primary" (click)="continuarConTelefono()" [disabled]="!telefonoDuenio">
          Siguiente
        </button>
      </div>
    </ng-container>

    <!-- PASO 7: ConfirmaciÃ³n -->
    <ng-container *ngIf="paso === 9">
      <h5 class="mb-3">â‘¦ ConfirmaciÃ³n</h5>

      <p><strong>ğŸ“… Fecha:</strong> {{ fechaISO }}</p>
      <p><strong>ğŸ©º Servicio:</strong> {{ getNombreServicio(servicioSeleccionado) }}</p>
      <p><strong>â° Hora:</strong> {{ horaSeleccionada }}</p>
      <p><strong>TipoMascota:</strong> {{ tipoMascota }}</p>
      <p><strong>ğŸ¾ Mascota:</strong> {{ nombreMascota }}</p>
      <p><strong> Raza:</strong> {{ razaMascota }}</p>
      <p><strong> EdadMascota:</strong> {{ edadMascota }}</p>
      <p><strong>ğŸ‘¤ DueÃ±o:</strong> {{ nombreDueno }}</p>
      <p><strong>ğŸ“ TelÃ©fono:</strong> {{ telefonoDuenio }}</p>

      <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-link" (click)="paso = 8">AtrÃ¡s</button>
        <button class="btn btn-success" (click)="confirmarReserva()">
          Confirmar cita
        </button>
      </div>
    </ng-container>
  </div>
</div>
